<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Transcending Void Overlay</title>
<style>
body {
  margin: 0;
  overflow: hidden;
  background: url("/static/assets/CLR overlay.webp") no-repeat center center;
  background-size: cover;
  color: white;
  font-family: 'Brawl Stars', sans-serif;
}

#content {
  position: absolute;
  top: 10%;
  left: 5%;
}

.team {
  font-size: 32px;
  font-weight: bold;
  margin-bottom: 10px;
}

.player {
  font-size: 20px;
  margin-left: 10px;
}

.brawler {
  width: 64px;
  height: 64px;
  margin: 4px;
}
</style>
</head>
<body>
  <div id="content">
    <div id="map"></div>
    <div id="teams"></div>
    <div id="bans"></div>
    <div id="picks"></div>
  </div>

<script>
async function updateOverlay() {
  try {
    const res = await fetch("/data");
    const data = await res.json();

    document.getElementById("map").innerHTML = `<h2>${data.map.name}</h2>`;
    
    document.getElementById("teams").innerHTML = data.teams.map(t =>
      `<div class="team">${t.name}<div>${t.players.map(p => `<div class="player">${p}</div>`).join('')}</div></div>`
    ).join('');

    document.getElementById("bans").innerHTML = "<h3>Bans:</h3>" + data.bans.map(b =>
      `<img class="brawler" src="https://cdn.brawlify.com/brawlers/${b}.png">`
    ).join('');

    document.getElementById("picks").innerHTML = "<h3>Picks:</h3>" + data.picks.map(b =>
      `<img class="brawler" src="https://cdn.brawlify.com/brawlers/${b}.png">`
    ).join('');
  } catch (err) {
    console.error(err);
  }
}

setInterval(updateOverlay, 5000);
updateOverlay();
</script>
</body>
</html>
